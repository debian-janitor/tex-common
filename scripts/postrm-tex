##
## postrm-tex
##
## postrm snippets for registering hyphenation patterns, font maps, and formats
##
## Authors:
##       Florent Rougon <f.rougon@free.fr>
##       Norbert Preining <preining@logic.at>
##
# Please note that comments in this file are stripped before installation
# by calling a grep -v '^[ \t]*# '
# Thus, first lines containing ## are preserved!
# So please be careful if you add stuff here!
#

# it might happen that tex-common is not installed and
# still the postrm of a package is tried to be uninstalled
# so don't call update-texmf-config if not present
# See bug report #531581
dhit_call_update_texmf_config ()
{
    if which update-texmf-config >/dev/null; then
        update-texmf-config $*
    else
        echo "update-texmf-config not present: is tex-common installed?" >&2
    fi
}


case "$1" in
    remove|disappear)
        for i in #WHATTODO# ; do
            if [ "$i" = lsr ] ; then
                dhit_call_update_texmf_config lsr
            fi
            if [ "$i" = lsrfull ] ; then
                dhit_call_update_texmf_config lsrfull
            fi
            if [ "$i" = map ] ; then
                dhit_call_update_texmf_config map
            fi
            if [ "$i" = allformats ] ; then
                for fmt in #FORMATS# ; do
                    rm -f /var/lib/texmf/web2c/$fmt.*
                done
            fi
            if [ "$i" = format ] ; then
                for fmt in #FORMATS# ; do
                    rm -f /var/lib/texmf/web2c/$fmt.*
                done
            fi
            if [ "$i" = hyphen ] ; then
                dhit_call_update_texmf_config hyphen
            fi
        done
    ;;

    purge|upgrade|failed-upgrade|abort-upgrade|abort-install)
    ;;

    *)
        echo "postrm called with unknown argument '$1'" >&2
        exit 1
    ;;
esac

# Let vim know that we don't want tabs
# vim:set expandtab tabstop=4: #
