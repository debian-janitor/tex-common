#include variables
#!/bin/sh -e
# 
# postinst maintainer script for the Debian <:=${PACKAGE}:> package.
# $Id: postinst.in,v 1.2 2005/06/29 19:40:45 frank Exp $
<:=@COPYRIGHT:>//

## Define static variables we need
MKTMPDIR=<:=$MKTMPDIR:> # mktemp will create its files there
UCF_FILES="<:=$TEX_COMMON_UCF_FILES:>"
UCF="ucf --debconf-ok"
#UCF="ucf -d --debconf-ok --verbose"


umask 022

# Give a name to the first commandline argument
action=$1

. <:=${CONFMODULE}:>
db_version 2.0

# external function definitions are currently not needed
# <:open(FUNCTIONS,'postinst.functions');@FUNCTIONS=<FUNCTIONS>;close(FUNCTIONS):>//
# <:=@FUNCTIONS:>//

# <:open(FUNCTIONS,'common.functions');@FUNCTIONS=<FUNCTIONS>;close(FUNCTIONS):>//
# <:=@FUNCTIONS:>//

#################################################################
# Here starts the real action
#################################################################

## normal actions
case $action in
  configure|reconfigure)
# normal install    
    # handle ucf-managed configuration files
    for file in $UCF_FILES; do
      $UCF /usr/share/tex-common/`basename $file` /etc/texmf/$file
    done

# run our scripts - this way we ensure that the generated files are
# corrected, should one of the scripts have produced buggy output in 
# a prior version
    update-texmf
    update-fmtutil
    update-updmap

    ;;
  *)
    ;;
esac


#DEBHELPER#

