#include variables
#!/bin/sh -e
# 
# postrm maintainer script for the Debian <:=${PACKAGE}:> package.
# $Id$
<:=@COPYRIGHT:>//

## variables
PURGE_EXTENSIONS="<:=$PURGE_EXTENSIONS:>"
UCF_FILES="<:=$TEX_COMMON_UCF_FILES:>"
TEXMFSYSVAR="<:=$TEXMFSYSVAR:>"

# give commandline args a name
action=$1 # remove, purge, upgrade, failed-upgrade, abort-install, abort-upgrade, disappear

<:open(FUNCTIONS,'postrm.functions');@FUNCTIONS=<FUNCTIONS>;close(FUNCTIONS):>//
<:=@FUNCTIONS:>//

## do the things we have to do always
case $action in
  remove)
    # remove /var/lib/texmf/web2c/*
    rm -f $TEXMFSYSVAR/web2c/* 
    rm -f $TEXMFSYSVAR/tex/generic/config/language.dat
    rm -f $TEXMFSYSVAR/ls-R-LOCAL

    # now remove the directory
    # (if we were installed with an old version of tetex-base, the other package
    # might have deleted it already)
    test -d /var/lib/texmf && rmdir --ignore-fail-on-non-empty /var/lib/texmf || true
    ;;
  purge)
    # purge texmf_parts
    for file in $UCF_FILES; do
      purge_ucf_file /etc/texmf/$file
    done
    # purge texmf.cnf which is generated by update-texmf using ucf:
    purge_ucf_file  /etc/texmf/texmf.cnf

    # remove /var/lib/texmf/web2c/*
    # rm -f $TEXMFSYSVAR/web2c/* # nukes tetex-base's mktex.cnf
    ;;
  *)
    ;;
esac


#DEBHELPER#

