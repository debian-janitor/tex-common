<::>//
#!/bin/sh -e
# 
# postrm maintainer script for the Debian <:=${PACKAGE}:> package.
# $Id$

#include variables
<:=@COPYRIGHT:>//

## variables
PURGE_EXTENSIONS="<:=$PURGE_EXTENSIONS:>"
UCF_FILES="<:=$TEX_COMMON_UCF_FILES:>"
TEXMFSYSVARDIR="<:=$TEXMFSYSVARDIR:>"

# give commandline args a name
action=$1 # remove, purge, upgrade, failed-upgrade, abort-install, abort-upgrade, disappear

<:open(FUNCTIONS,'debian/postrm.functions');@FUNCTIONS=<FUNCTIONS>;close(FUNCTIONS):>//
<:=@FUNCTIONS:>//

## do the things we have to do always
case $action in
  remove)
    # remove TEXMFSYSVARDIR: All files and dirs are created either by
    # us, or by packages depending on us.
    rm -rf $TEXMFSYSVARDIR
    # same with obsolete /var/cache/fonts
    rm -rf /var/cache/fonts
    ;;
  purge)
    # purge texmf_parts
    for file in $UCF_FILES; do
      purge_ucf_file /etc/texmf/$file
    done
    # purge texmf.cnf which is generated by update-texmf using ucf:
    purge_ucf_file  /etc/texmf/texmf.cnf

    # try to remove /usr/local/share/texmf if it is empty
    # people should normally not have TEXMFLOCAL ls-R files
    # unless they called mktexlsr manually, in which case this is fine
    # maintainer scripts should call mktexlsr with a list of trees so
    # no /u/l/s/texmf/ls-R is created
    #rm -f /usr/local/share/texmf/ls-R 2>/dev/null || true
    rmdir --ignore-fail-on-non-empty /usr/local/share/texmf/ 2>/dev/null || true
    ;;
  *)
    ;;
esac


#DEBHELPER#

