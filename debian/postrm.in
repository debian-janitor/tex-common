#include variables
#!/bin/sh -e
# 
# postrm maintainer script for the Debian <:=${PACKAGE}:> package.
# $Id: postrm.in,v 1.1 2005/06/29 19:40:45 frank Exp $
<:=@COPYRIGHT:>//

## variables
PURGE_EXTENSIONS="<:=$PURGE_EXTENSIONS:>"
UCF_FILES="<:=$TEX_COMMON_UCF_FILES:>"
VARTEXMF="<:=$VARTEXMF:>"

# give commandline args a name
action=$1 # remove, purge, upgrade, failed-upgrade, abort-install, abort-upgrade, disappear

<:open(FUNCTIONS,'postrm.functions');@FUNCTIONS=<FUNCTIONS>;close(FUNCTIONS):>//
<:=@FUNCTIONS:>//

## do the things we have to do always
case $action in
  purge)
    # purge texmf_parts
    for file in $UCF_FILES; do
      purge_ucf_file /etc/texmf/$file
    done
    # purge texmf.cnf which is generated by update-texmf using ucf:
    purge_ucf_file  /etc/texmf/texmf.cnf

    # remove /var/lib/texmf/web2c/*
    rm -f $VARTEXMF/web2c/* # nukes tetex-base's mktex.cnf
    ;;
  remove)
    # remove /var/lib/texmf/web2c/*
    rm -f $VARTEXMF/web2c/* # nukes tetex-base's mktex.cnf

    # now remove the directory
    rmdir --ignore-fail-on-non-empty /var/lib/texmf 
    ;;
  *)
    ;;
esac


#DEBHELPER#

