
update_fontmaps()
{
    update-updmap --quiet
    # mktexlsr is recommended now because updmap-sys relies heavily on
    # Kpathsea to locate updmap.cfg and the map files. Also, it is slightly
    # better not to specify a particular directory to refresh because
    # updmap.cfg is typically found in $TEXMFSYSVAR while the map files are in
    # $TEXMFMAIN.
    # According to the Debian TeX policy, running mktexlsr and updmap-sys
    # should work as long as tex-common is configured and these files are
    # available (general Debian policy wouldn't assure that without this
    # override from the Debian TeX policy).
    if which mktexlsr >/dev/null; then mktexlsr; fi
    if which updmap-sys >/dev/null; then
        printf "Running updmap-sys... "
        updmap-sys --quiet
        echo "done."
    fi

    return 0
}

case "$1" in
    configure)
        update_fontmaps
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
        update_fontmaps
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

